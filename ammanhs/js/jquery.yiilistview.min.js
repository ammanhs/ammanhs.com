(function(a){a.fn.yiiListView=function(b){return this.each(function(){var c=a.extend({},a.fn.yiiListView.defaults,b||{});var d=a(this);var e=d.attr("id");if(c.updateSelector==undefined){c.updateSelector="#"+e+" ."+c.pagerClass.replace(/\s+/g,".")+" a, #"+e+" ."+c.sorterClass.replace(/\s+/g,".")+" a"}a.fn.yiiListView.settings[e]=c;if(c.ajaxUpdate.length>0){a(c.updateSelector).die("click").live("click",function(){a.fn.yiiListView.update(e,{url:a(this).attr("href")});return false})}})};a.fn.yiiListView.defaults={ajaxUpdate:[],ajaxVar:"ajax",pagerClass:"pager",loadingClass:"loading",sorterClass:"sorter"};a.fn.yiiListView.settings={};a.fn.yiiListView.getKey=function(c,b){return a("#"+c+" > div.keys > span:eq("+b+")").text()};a.fn.yiiListView.getUrl=function(b){return a("#"+b+" > div.keys").attr("title")};a.fn.yiiListView.update=function(d,b){var c=a.fn.yiiListView.settings[d];a("#"+d).addClass(c.loadingClass);b=a.extend({type:"GET",url:a.fn.yiiListView.getUrl(d),success:function(f,e){a.each(c.ajaxUpdate,function(h,g){var j="#"+g;a(j).replaceWith(a(j,"<div>"+f+"</div>"))});if(c.afterAjaxUpdate!=undefined){c.afterAjaxUpdate(d,f)}a("#"+d).removeClass(c.loadingClass)},error:function(e,g,f){a("#"+d).removeClass(c.loadingClass);alert(e.responseText)}},b||{});if(b.data!=undefined&&b.type=="GET"){b.url=a.param.querystring(b.url,b.data);b.data={}}b.url=a.param.querystring(b.url,c.ajaxVar+"="+d);if(c.beforeAjaxUpdate!=undefined){c.beforeAjaxUpdate(d)}a.ajax(b)}})(jQuery);
